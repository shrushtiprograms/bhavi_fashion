{% extends 'base.html' %}
{% load static %}

{% block title %}Contact Us - Bhavi India Fashion{% endblock %}

{% block extra_css %}
    <style>
        .card {
            border: none;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .form-control, .form-select {
            border-color: var(--secondary);
        }
        .form-control:focus, .form-select:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 0.2rem rgba(74,99,102,0.25);
        }
        .btn-primary {
            background-color: var(--primary);
            border-color: var(--primary);
        }
        .btn-primary:hover {
            background-color: #3A4F52;
            border-color: #3A4F52;
        }
        .social-links a {
            color: var(--primary);
            transition: color 0.3s;
        }
        .social-links a:hover {
            color: #3A4F52;
        }
        .map-container {
            height: 400px;
            border-radius: 8px;
            overflow: hidden;
        }
        h3, h5 {
            font-family: 'Marcellus', serif;
        }
        p, label, select, input, textarea {
            font-family: 'Jost', sans-serif;
        }
    </style>
{% endblock %}

{% block content %}
    <div class="container py-5">
        <h1 class="text-center mb-5">Contact Us</h1>
        
        <div class="row">
            <div class="col-md-6 mb-4">
                <div class="card h-100">
                    <div class="card-body">
                        <h3 class="mb-4">Get in Touch</h3>
                        <form id="contactForm" action="{% url 'accounts:contact_submit' %}" method="post">
                            {% csrf_token %}
                            <div class="mb-3">
                                <label for="name" class="form-label">Your Name</label>
                                <input type="text" class="form-control" id="name" name="name" required>
                            </div>
                            <div class="mb-3">
                                <label for="email" class="form-label">Email Address</label>
                                <input type="email" class="form-control" id="email" name="email" required>
                            </div>
                            <div class="mb-3">
                                <label for="phone" class="form-label">Phone Number</label>
                                <input type="tel" class="form-control" id="phone" name="phone">
                            </div>
                            <div class="mb-3">
                                <label for="subject" class="form-label">Subject</label>
                            <select class="form-select" id="subject" name="subject" required>
                                    <option value="">Select a subject</option>
                                    <option value="product">Product Inquiry</option>
                                    <option value="custom">Custom Design Query</option>
                                    <option value="order">Order Status</option>
                                    <option value="return">Returns & Exchanges</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="message" class="form-label">Your Message</label>
                                <textarea class="form-control" id="message" name="message" rows="5" required></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">Submit Message</button>
                        </form>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6 mb-4">
                <div class="card h-100">
                    <div class="card-body">
                        <h3 class="mb-4">Contact Information</h3>
                        <div class="mb-4">
                            <h5><i class="fas fa-map-marker-alt me-2 text-primary"></i> Location</h5>
                            <p>Bhavi India Fashion
                                23 Gujarat Udyog Nagar Bardolpura Outside, Dariyapur Darwaja Cir, near Bansidhar mill estate, Ahmedabad, Gujarat 380004</p>
                        </div>
                        <div class="mb-4">
                            <h5><i class="fas fa-phone me-2 text-primary"></i> Phone</h5>
                            <p>+91 1234567890</p>
                        </div>
                        <div class="mb-4">
                            <h5><i class="fas fa-envelope me-2 text-primary"></i> Email</h5>
                            <p>bhaviindiafashion@gmail.com</p>
                        </div>
                        <div class="mb-4">
                            <h5><i class="fas fa-clock me-2 text-primary"></i> Business Hours</h5>
                            <p>Monday - Saturday: 10:00 AM to 7:00 PM<br>Sunday: Closed</p>
                        </div>
                        <div class="social-links mt-4">
                            <h5>Connect With Us</h5>
                            <div class="d-flex gap-3 mt-2">
                                <a href="#" aria-label="Facebook"><i class="fab fa-facebook fa-lg"></i></a>
                                <a href="#" aria-label="Instagram"><i class="fab fa-instagram fa-lg"></i></a>
                                <a href="#" aria-label="Twitter"><i class="fab fa-twitter fa-lg"></i></a>
                                <a href="#" aria-label="WhatsApp"><i class="fab fa-whatsapp fa-lg"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="mb-5 mt-3">
            <h3 class="text-center mb-4">Find Us</h3>
            <div class="map-container">
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d458.93631507891956!2d72.59228787991283!3d23.04247159324055!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x395e85a99c61061d%3A0xe126120a6266ffcc!2sBhavi%20India%20Fashion!5e0!3m2!1sen!2sin!4v1744743180038!5m2!1sen!2sin" 
                    width="100%" 
                    height="100%" 
                    style="border:0;" 
                    allowfullscreen="" 
                    loading="lazy" 
                    referrerpolicy="no-referrer-when-downgrade">
                </iframe>
            </div>
        </div>
    </div>
{% endblock %}

{% block extra_js %}
    <script>
        $(document).ready(function() {
            function showNotification(message, type) {
                const alertClass = type === 'success' ? 'alert-success' :
                                  type === 'error' ? 'alert-danger' :
                                  type === 'info' ? 'alert-info' : 'alert-warning';
                const notification = $(`
                    <div class="alert ${alertClass} alert-dismissible fade show" role="alert">
                        ${message}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                `);
                $('#notification-area').append(notification);
                setTimeout(() => notification.alert('close'), 3000);
            }

            $('#contactForm').on('submit', function(e) {
                e.preventDefault();
                const $form = $(this);
                const $button = $form.find('button[type="submit"]');
                
                $button.prop('disabled', true).html('<span class="spinner-border spinner-border-sm me-2" role="status"></span>Sending...');

                $.ajax({
                    url: $form.attr('action'),
                    method: 'POST',
                    data: $form.serialize(),
                    headers: {
                        'X-CSRFToken': $('input[name="csrfmiddlewaretoken"]').val()
                    },
                    success: function(data) {
                        if (data.success) {
                            showNotification('Your message has been sent successfully!', 'success');
                            $form[0].reset();
                        } else {
                            showNotification(data.message || 'Failed to send message.', 'danger');
                        }
                        $button.prop('disabled', false).html('Submit Message');
                    },
                    error: function(xhr) {
                        showNotification('Error: ' + (xhr.responseJSON ? xhr.responseJSON.message : 'Unable to send message.'), 'danger');
                        $button.prop('disabled', false).html('Submit Message');
                    }
                });
            });
        });
    </script>
{% endblock %}